<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" >
    <title>Formulario productos</title>
    <style type="text/css">
      ol, ul { 
      list-style-type: none;
      }
    </style>
  </head>
<body>
    <h1>Registro de producto</h1>
    <form id="formularioProductos" action="http://localhost/tecweb/practicas/p09/set_producto_v2.php" method="post" enctype="multipart/form-data">  
   <fieldset>
    <legend>Información del Producto</legend>

    <ul>
        <li><label for="form-name">Nombre:</label> <input type="text" name="name" id="form-name"></li>
        <li>
            <label for="form-brand">Marca:</label>
            <select name="brand" id="form-brand">
                <option value="">Selecciona una marca</option>
                <option value="Samsung">Samsung</option>
                <option value="Apple">Apple</option>
                <option value="Xiaomi">Xiaomi</option>
                <option value="Huawei">Huawei</option>
                <option value="Motorola">Motorola</option>
            </select>
        </li>

        <li><label for="form-model">Modelo:</label> <input type="text" name="model" id="form-model"></li>
        <li>
        <label for="form-price">Precio (MXN):</label>
        <input type="number" name="price" id="form-price" min="0" step="0.01" inputmode="decimal" placeholder="0.00">
        </li>
        <li>
        <label for="form-description">Detalles:</label><br>
        <textarea name="description" rows="4" cols="60" id="form-description" placeholder="No más de 250 caracteres de longitud"></textarea>
        </li>
        <li>
        <label for="form-stock">Unidades disponibles:</label>
        <input type="number" name="stock" id="form-stock" min="0" step="1" inputmode="numeric" placeholder="0">
        </li>
        <li>
        <label for="form-image">Imagen del producto:</label>
        <input type="file" name="image" id="form-image" accept="image/*">
        </li>
        <li>    
          <button type="submit">Registrar producto</button>
        </li>
    </ul>
    </fieldset>
</form>

    <script>
    document.getElementById('formularioProductos').addEventListener('submit', function(e) {
    const name = document.getElementById('form-name').value.trim();
    const brand = document.getElementById('form-brand').value;
    const model = document.getElementById('form-model').value.trim();
    const price = parseFloat(document.getElementById('form-price').value);
    const stock = parseInt(document.getElementById('form-stock').value);
    const description = document.getElementById('form-description').value.trim();
    const imageFile = document.getElementById('form-image').files[0];

    if (!name || name.length > 100) {
        alert('El nombre es requerido y debe tener 100 caracteres o menos.');
        e.preventDefault();
        return;
    }
    

    if (!brand || brand === '') {
        alert('Debe seleccionar una marca de la lista.');
        e.preventDefault();
        return;
    }
    
    
    const alfanumerico = /^[a-zA-Z0-9]+$/;
    if (!model || model.length > 25) {
        alert('El modelo es requerido y debe tener 25 caracteres o menos.');
        e.preventDefault();
        return;
    }
    if (!alfanumerico.test(model)) {
        alert('El modelo debe ser alfanumérico (solo letras y números).');
        e.preventDefault();
        return;
    }
    
    
    if (isNaN(price) || price <= 99.99) {
        alert('El precio debe ser mayor a 99.99');
        e.preventDefault();
        return;
    }
    
    if (description.length > 250) {
        alert('Los detalles deben tener 250 caracteres o menos.');
        e.preventDefault();
        return;
    }
    
    if (isNaN(stock) || stock < 0) {
        alert('Las unidades son requeridas y deben ser mayor o igual a 0.');
        e.preventDefault();
        return;
    }
    
   
    if (!imageFile) {
    
        const hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = 'imagen_defecto';
        hiddenInput.value = 'img/imagen.png';
        this.appendChild(hiddenInput);
    }
    });
    </script>


</body>
</html>
